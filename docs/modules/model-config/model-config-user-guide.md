# 模型配置管理用户手册

## 简介

模型配置管理模块提供了统一的界面来管理各种 AI 模型的 API 配置。您可以添加多个模型提供商的配置，管理不同模型的 API 密钥和访问权限。

## 访问方式

- **URL**: http://your-domain:21002/model-management
- **权限**: 所有登录用户

## 主要功能

### 1. 创建新配置

1. 点击页面右上角的「新建配置」按钮
2. 填写配置信息：
   - **配置名称**: 给配置起一个易于识别的名称，如 "DeepSeek 官方"
   - **Provider**: 选择提供商（当前仅支持 OpenAI 兼容接口）
   - **Base URL**: 填写 API 地址，如 `https://api.deepseek.com`
   - **API Key**: 填写您的 API 密钥
   - **模型列表**: 点击「添加模型」添加至少一个模型
3. 可选：点击「测试连接」验证配置是否正确
4. 点击「保存」完成创建

### 2. 管理模型列表

每个配置可以包含多个模型，每个模型可以标识其能力：

- **模型 ID**: 模型的唯一标识符，如 `deepseek-chat`、`gpt-4`
- **支持视觉**: 勾选表示该模型可以处理图像
- **支持思考**: 勾选表示该模型具有推理/思考能力

#### 添加模型

1. 在配置对话框中点击「添加模型」
2. 输入模型 ID
3. 选择模型能力（视觉、思考）
4. 点击「确定」

#### 编辑模型

1. 在模型卡片上点击「编辑」
2. 修改模型信息
3. 点击「确定」

#### 删除模型

1. 在模型卡片上点击「删除」
2. 确认删除

**注意**: 每个配置至少需要包含一个模型。

### 3. 测试连接

在保存配置前，建议测试 API 连接是否正常：

1. 填写 Base URL 和 API Key
2. 添加至少一个模型
3. 点击「测试连接」按钮
4. 系统会发送一条测试消息（消耗少量 token）
5. 查看测试结果：
   - ✅ 成功：显示 API 返回的回复内容
   - ❌ 失败：显示具体的错误信息

### 4. 编辑配置

1. 在配置列表中找到要编辑的配置
2. 点击该行的「编辑」按钮
3. 修改配置信息
4. **重要**: 编辑模式下，API Key 字段留空表示不修改
5. 点击「保存」

### 5. 启用/禁用配置

1. 在配置列表中找到对应的配置
2. 点击「启用状态」开关
3. 开关变为绿色表示已启用，灰色表示已禁用

**说明**:
- 禁用的配置不会被系统使用
- 可以快速切换配置而无需删除

### 6. 删除配置

1. 在配置列表中找到要删除的配置
2. 点击该行的「删除」按钮
3. 在确认对话框中点击「确认删除」

**警告**: 删除操作不可撤销，请谨慎操作。

### 7. 过滤和搜索

使用页面顶部的过滤器快速查找配置：

- **启用状态**: 选择「已启用」或「已禁用」过滤配置
- **提供商**: 选择特定提供商（如 OpenAI）

### 8. 分页浏览

当配置数量较多时，使用底部的分页组件：

- 选择每页显示数量：10/20/50/100
- 点击页码或使用「上一页」「下一页」按钮导航
- 显示当前页和总记录数

## 常见问题

### Q: 为什么编辑时看不到已保存的 API Key？

**A**: 为了安全考虑，编辑模式下不会显示已保存的 API Key。如果需要更新，直接输入新的 API Key 即可；留空则表示不修改。

### Q: 测试连接会消耗很多 token 吗？

**A**: 不会。测试连接只发送一条简单的 "hi" 消息，并限制返回最多 5 个 token，消耗极小。

### Q: 支持哪些模型提供商？

**A**: 当前版本支持所有兼容 OpenAI API 格式的提供商，包括：
- OpenAI 官方
- DeepSeek
- Moonshot
- ModelScope
- 其他 OpenAI 兼容服务

### Q: 一个配置可以添加多少个模型？

**A**: 建议不超过 50 个模型。每个模型对应一个模型 ID，例如 gpt-4、gpt-3.5-turbo 等。

### Q: 更新配置时提示「已被其他用户修改」怎么办？

**A**: 这是因为配置被其他用户修改过。请点击「刷新」按钮重新加载最新数据，然后重试。

### Q: 配置名称有什么要求？

**A**:
- 长度：2-255 个字符
- 不能重复
- 建议使用易于识别的名称

### Q: Base URL 格式有什么要求？

**A**:
- 必须以 `http://` 或 `https://` 开头
- 通常是 `https://api.xxx.com` 格式
- 不要包含路径，如 `/v1`

## 安全建议

1. **保护 API Key**: 不要在公共场合分享 API Key
2. **定期更换**: 建议定期更换 API 密钥
3. **权限最小化**: 使用具有最小必要权限的 API Key
4. **禁用不用的配置**: 不使用时及时禁用配置

## 技术支持

如有问题，请联系技术支持团队或查看项目文档。

---

**版本**: 1.0.0
**更新日期**: 2025-01-15
